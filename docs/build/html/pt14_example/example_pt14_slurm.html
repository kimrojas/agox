
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Pt14-Au (EMT): Submission &#8212; AGOX 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pyramid.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Pt14-Au (EMT): Analysis" href="example_pt14_analysis.html" />
    <link rel="prev" title="Pt14-Au (EMT): Runscript" href="example_pt14.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="example_pt14_analysis.html" title="Pt14-Au (EMT): Analysis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="example_pt14.html" title="Pt14-Au (EMT): Runscript"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">AGOX 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Pt14-Au (EMT): Submission</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="pt14-au-emt-submission">
<h1>Pt14-Au (EMT): Submission<a class="headerlink" href="#pt14-au-emt-submission" title="Permalink to this headline">¶</a></h1>
<p>If running the search on a slurm based cluster the script below might be useful. Generally
the search is restarted a number of times, here 10, both to improve the accuracy of the search
and to gather statistics about its performance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH --job-name=Pt14_example
#SBATCH --partition=qtest
#SBATCH --mem=40G
#SBATCH --nodes=1
#SBATCH --time=24:00:00
#SBATCH --ntasks-per-node=5
#SBATCH --cpus-per-task=1
#SBATCH --array=1-10%10

echo &quot;========= Job started  at `date` ==========&quot;

SOURCE_FILE=... # Python environment with AGOX installed

source $SOURCE_FILE 
export OMP_NUM_THREADS=${SLURM_CPUS_PER_TASK:-1}

MAINDIR=&quot;$(pwd)&quot;
SCRATCH=/scratch/$SLURM_JOB_ID/run_$SLURM_ARRAY_TASK_ID

mkdir $SCRATCH
cp Pt14_example.py $SCRATCH/.
cd $SCRATCH
python Pt14_example.py -i $SLURM_ARRAY_TASK_ID
cd $MAINDIR
cp -rf $SCRATCH/ $MAINDIR/.

echo &quot;========= Job finished at `date` ==========&quot;

</pre></div>
</div>
<p>The script create a folder on the scratch directory of the compute node, moves the runscript
their and executes it. The ‘-i’ argument supplies the array ID of the job which is used both for
naming naming the database and as the seed for numpy’s random generator which makes reproduction of
runs possible.</p>
<p>When the searches have finished we will have ten folders each containing their own database (.db) file.</p>
<p>In the next section we will look at ways of analyzing the search using these database files.</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction to AGOX</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_pt14.html">Pt14-Au (EMT): Runscript</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pt14-Au (EMT): Submission</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_pt14_analysis.html">Pt14-Au (EMT): Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../observers.html">Observers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../abstract_base_classes.html">Abstract Base Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inheritance_generator/example.html">Inheritance: An example</a></li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="example_pt14.html"
                          title="previous chapter">Pt14-Au (EMT): Runscript</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="example_pt14_analysis.html"
                          title="next chapter">Pt14-Au (EMT): Analysis</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/pt14_example/example_pt14_slurm.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="example_pt14_analysis.html" title="Pt14-Au (EMT): Analysis"
             >next</a> |</li>
        <li class="right" >
          <a href="example_pt14.html" title="Pt14-Au (EMT): Runscript"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">AGOX 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Pt14-Au (EMT): Submission</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Mads-Peter.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>